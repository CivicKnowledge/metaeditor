{% extends "editor/base.html" %}
{% load staticfiles %}
{% load bootstrap3 %}
{% block title_prefix %}Dataset Edit - {% endblock %}
{% block extrajs %}
    <script src="{% static "editor/js/dropzone.js" %}"></script>
    <script src="{% static "editor/js/dataset.js" %}"></script>
{% endblock %}
{% block content %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row">
            <div class="col-xs-6">
                {% bootstrap_form form %}
            </div>
            <div class="col-xs-6">
                <div id="datafiles" class="section">
                    <h3>Data files</h3>
                    <div class="dropzone" id="datafiles-dropzone"
                         data-dropzone-upload-url="{% url 'upload' %}?datafile"
                         style="height:130px;border:1px solid gray;">
                    </div>

                    <div class="empty-form" style="display:none;border:solid gray 1px;">
                        <div style="border:1px solid gray;">
                            {% bootstrap_form datafile_formset.empty_form layout="inline" %}
                        </div>
                    </div>
                    <div class="formset"
                         data-total-forms-id="id_{{ datafile_formset.prefix }}-TOTAL_FORMS">
                        {{ datafile_formset.management_form }}
                        {% for form in datafile_formset %}
                            <div style="border:1px solid gray;" class="dynamic-formset-form">
                                {% bootstrap_form form layout="inline" %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div id="docfiles" class="section">
                    <h3>Documents</h3>
                    <div class="dropzone"
                        id="docfiles-dropzone"
                        data-dropzone-upload-url="{% url 'upload' %}?docfile"
                        style="height:130px;border:1px solid gray;">
                    </div>
                    <div class="empty-form" style="display:none;border:solid gray 1px;">
                        <div style="border:1px solid gray;">
                            {% bootstrap_form docfile_formset.empty_form layout="inline" %}
                        </div>
                    </div>
                    <div class="formset" data-total-forms-id="id_{{ docfile_formset.prefix }}-TOTAL_FORMS">
                        {{ docfile_formset.management_form }}
                        {% for form in docfile_formset %}
                            <div style="border:1px solid gray;" class="dynamic-formset-form">
                                {% bootstrap_form form layout="inline" %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <br />
        <div style="float:right;">
        {% buttons %}
            <button type="submit" class="btn btn-default"
                    title="Continue editing this dataset after saving"
                    name="save-and-continue"/>
                Save and continue editing
            </button>
            <button type="submit"
                    class="btn btn-primary"
                    title="Save and go to the list of dataset">
                Save
            </button>
        {% endbuttons %}
        </div>
    </form>
{% endblock %}
